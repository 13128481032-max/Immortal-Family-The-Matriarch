# 宗门系统扩展更新日志

## 📅 更新日期
2026年1月26日

## 🎯 更新概述
大幅扩展宗门系统，新增10个宗门，并优化灵根与宗门的匹配算法，使不同灵根类型的子嗣能够进入更适合的宗门。

---

## ✨ 新增宗门

### 🏔️ 顶级宗门 (minApt: 80+)
1. **天帝宗** (minApt: 85)
   - 偏好：雷、火灵根
   - 加成：1.6倍修炼速度
   - 特色：修仙界最强正道宗门，只收天灵根或变异灵根
   - 功法：天帝经（天阶）
   - 互斥：天魔教、阴煞宗

### ⚡ 高级宗门 (minApt: 60-79)
2. **东海龙宫** (minApt: 65)
   - 偏好：水灵根
   - 加成：1.3倍修炼速度
   - 特色：水下龙族建立的宗门，只收水灵根弟子
   - 功法：沧海无量诀（地阶）

3. **天雷宗** (minApt: 70)
   - 偏好：雷灵根
   - 加成：1.4倍修炼速度
   - 特色：专修雷法，偏好变异雷灵根，攻击第一
   - 功法：九天引雷术（天阶）

### 🌸 中级宗门 (minApt: 40-59)
4. **九星门** (minApt: 45)
   - 偏好：金、土灵根
   - 加成：1.18倍修炼速度
   - 特色：专研星辰阵法与占卜之术
   - 功法：九星天罡诀（玄阶）

5. **逍遥派** (minApt: 50)
   - 偏好：风灵根
   - 加成：1.2倍修炼速度
   - 特色：崇尚自由，身法天下第一
   - 功法：逍遥御风诀（玄阶）

6. **合欢宗** (minApt: 35)
   - 偏好：木、水灵根
   - 加成：1.12倍修炼速度
   - 特色：双修法门，不拘灵根，但需容貌姣好
   - 功法：阴阳和合散（玄阶）

### 🛠️ 低级宗门 (minApt: 20-39)
7. **百草谷** (minApt: 25)
   - 偏好：木灵根
   - 加成：1.08倍修炼速度
   - 特色：医道宗门，擅长炼药与治疗
   - 功法：百草回春诀（黄阶）

8. **巨石门** (minApt: 20)
   - 偏好：土、金灵根
   - 加成：1.05倍修炼速度
   - 特色：以炼器和采矿闻名
   - 功法：巨灵炼器诀（黄阶）

### 👹 魔道宗门 (激进型)
9. **阴煞宗** (minApt: 35)
   - 偏好：冰灵根
   - 加成：1.8倍修炼速度
   - 特色：修炼鬼道之法，与正道为敌
   - 功法：阴煞鬼诀（地阶）
   - 互斥：凌霄宗、天帝宗

10. **血河派** (minApt: 25)
    - 偏好：水、火灵根
    - 加成：1.7倍修炼速度
    - 特色：以血为道，吸食生机，修炼极快但易走火入魔
    - 功法：血河神功（玄阶）

---

## 🔄 已有宗门调整

### 凌霄宗（原"青云剑宗"）
- 名称保持为"凌霄宗"
- 新增互斥：阴煞宗
- 功法保持：青云剑诀（玄阶）

### 其他宗门
- **丹鼎阁**、**百花谷**、**金刚门**、**天魔教**保持不变
- 所有宗门现在都有明确的灵根偏好和资源类型

---

## 🎨 系统优化

### 1. 智能宗门推荐算法
新的契合度计算系统，考虑多个维度：

#### 灵根元素匹配（最重要）
- 完全匹配宗门偏好元素：+50分
- 单灵根/天灵根完全匹配：额外+30分

#### 特殊灵根类型加成
- **天灵根**：顶级宗门+50分
- **变异灵根**：
  - 天魔教 +60分
  - 天雷宗 +50分
  - 天帝宗 +40分
  - 冰灵根→阴煞宗 +50分
  - 风灵根→逍遥派 +50分
- **单灵根**：高级/顶级宗门 +30分
- **双灵根**：中高级宗门 +20分

#### 资质匹配度
- 资质超过门槛：每超1点+1分（最多+40）
- 资质远超门槛（20+）且为顶级宗门：额外+20分

#### 宗门等级调整
- 顶级宗门：-5分（选拔严格）
- 魔道宗门：+15分（对特殊体质感兴趣）
- 低级宗门：-10分（吸引力低）

#### 容貌加成
- 百花谷、合欢宗：容貌80+ → +30分，容貌60+ → +15分

### 2. 宗门选择界面优化
- 现在显示4个推荐宗门（原来3个）
- 契合度评分更精确
- 显示宗门互斥关系

---

## 🎮 游戏体验提升

### 不同灵根的最佳宗门选择

| 灵根类型 | 推荐宗门 | 原因 |
|---------|---------|------|
| 天灵根（金） | 凌霄宗 | 天下第一剑宗，金系顶配 |
| 天灵根（火） | 丹鼎阁、天帝宗 | 炼丹圣地或最强正道 |
| 天灵根（水） | 东海龙宫 | 水系专属，龙族传承 |
| 变异灵根（雷） | 天魔教、天雷宗 | 雷法至尊，杀伐第一 |
| 变异灵根（冰） | 阴煞宗 | 鬼道之法，冰系完美契合 |
| 变异灵根（风） | 逍遥派 | 身法天下第一 |
| 单灵根（金） | 凌霄宗、九星门 | 剑道或阵法 |
| 单灵根（木） | 百花谷、百草谷 | 辅助或医道 |
| 单灵根（土） | 金刚门、巨石门 | 炼体或炼器 |
| 双灵根 | 各中高级宗门 | 选择多样 |
| 三/四/五灵根 | 低级宗门、散修 | 资质有限 |

### 宗门数量统计
- **顶级宗门**：2个（凌霄宗、天帝宗）
- **高级宗门**：3个（丹鼎阁、东海龙宫、天雷宗）
- **中级宗门**：4个（百花谷、九星门、逍遥派、合欢宗）
- **低级宗门**：3个（金刚门、百草谷、巨石门）
- **魔道宗门**：3个（天魔教、阴煞宗、血河派）
- **散修**：1个

**总计：16个选择**（含散修）

---

## 📝 技术细节

### 修改文件
1. `src/game/cultivationSystem.js` - 宗门定义扩展
2. `src/data/manualData.js` - 功法配置更新
3. `src/game/mechanics.js` - 宗门推荐算法优化
4. `src/components/Modals/SectSelectionModal.jsx` - 契合度计算更新

### 新增功法
- 天帝经（天阶）
- 沧海无量诀（地阶）
- 九星天罡诀（玄阶）
- 百草回春诀（黄阶）
- 巨灵炼器诀（黄阶）
- 阴煞鬼诀（地阶）
- 血河神功（玄阶）

---

## 🔮 后续规划

### 潜在优化方向
1. 为每个宗门添加特殊剧情事件
2. 宗门之间的竞争与冲突系统
3. 宗门任务系统扩展
4. 宗门声望与排名系统
5. 叛出宗门与转投门派机制

---

## 📊 兼容性说明
- ✅ 完全向后兼容现有存档
- ✅ 不影响已加入宗门的子嗣
- ✅ 新存档可立即体验所有新宗门
