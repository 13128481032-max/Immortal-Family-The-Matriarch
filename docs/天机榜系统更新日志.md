# å¤©æœºæ¦œç³»ç»Ÿæ›´æ–°æ—¥å¿—

## æ¦‚è¿°
å®ç°"æ¦œå•ä¸Šçš„NPCæ˜¯æ´»ç”Ÿç”Ÿçš„äººï¼Œä»¥åçœŸçš„ä¼šé‡åˆ°"çš„è®¾å®šï¼Œå°†å¤©æœºæ¦œæ•´åˆåˆ°ä¿®çœŸç•Œé‚¸æŠ¥ç³»ç»Ÿä¸­ã€‚

## ä¸»è¦åŠŸèƒ½

### 1. ä¸–ç•Œåäººæ± ç³»ç»Ÿ
- **æ–‡ä»¶**: `src/game/worldNpcGenerator.js`
- **åŠŸèƒ½**:
  - æ¸¸æˆå¼€å§‹æ—¶è‡ªåŠ¨ç”Ÿæˆ30ä½ä¸–ç•ŒåäººNPC
  - éšæœºç”Ÿæˆä¸­å¼å§“åï¼ˆ70ä¸ªå§“æ° + 50+ä¸ªåå­—ç”¨å­—ï¼‰
  - éšæœºç”Ÿæˆç§°å·ï¼ˆ40+ä¸ªå‰ç¼€/åç¼€ç»„åˆï¼‰
  - åˆ†å¸ƒåœ¨ä¸åŒä¿®ä¸ºç­‰çº§ï¼ˆå‡¡äººã€ç»ƒæ°”æœŸã€ç­‘åŸºæœŸã€é‡‘ä¸¹æœŸã€å…ƒå©´æœŸã€åŒ–ç¥æœŸï¼‰
  - æ¯ä½åäººæœ‰å®Œæ•´çš„å±æ€§ï¼šå¹´é¾„ã€æ€§æ ¼ã€å®—é—¨å½’å±ã€é‡å¤§äº‹ä»¶è®°å½•

### 2. å¤©æœºæ¦œæ’åç³»ç»Ÿ
- **é›†æˆä½ç½®**: ä¿®çœŸç•Œé‚¸æŠ¥ï¼ˆ`src/data/newsTemplates.js`ï¼‰
- **æ’åè§„åˆ™**:
  - åˆå¹¶ä¸‰ä¸ªæ•°æ®æºï¼šç©å®¶ã€ä¸–ç•Œåäººæ± ã€æ´»è·ƒNPCï¼ˆé…å¶ã€å­å—£ï¼‰
  - æŒ‰ä¿®ä¸ºå€¼é™åºæ’åˆ—
  - æ˜¾ç¤ºå‰ä¸‰åï¼Œå¸¦æœ‰ğŸ¥‡ğŸ¥ˆğŸ¥‰æ ‡è¯†
  - æ˜¾ç¤ºç§°å·ã€å§“åã€å¢ƒç•Œ

### 3. ä¸–ç•ŒNPCæ¼”åŒ–ç³»ç»Ÿ
- **æ—¶æœº**: æ¯å¹´1æœˆè‡ªåŠ¨è§¦å‘
- **æ¼”åŒ–æœºåˆ¶**:
  - å¹´é¾„å¢é•¿
  - çªç ´æ¦‚ç‡ï¼ˆæ ¹æ®å¢ƒç•Œå’Œå¹´é¾„ï¼‰
  - æ­»äº¡æ¦‚ç‡ï¼ˆ0.5%ï¼Œé«˜å¢ƒç•Œé™ä½ï¼‰
  - çªç ´æˆåŠŸä¼šè®°å½•åˆ°é‡å¤§äº‹ä»¶
  - æ­»äº¡ä¼šç”Ÿæˆæ–°é—»é€šçŸ¥

### 4. UIé›†æˆ
- **ç§»é™¤**: ç‹¬ç«‹çš„å¤©æœºæ¦œæŒ‰é’®å’Œå¼¹çª—
- **æ•´åˆ**: å¤©æœºæ¦œåªåœ¨é‚¸æŠ¥ä¸­æŸ¥çœ‹
- **æ˜¾ç¤º**: æ¯æœŸé‚¸æŠ¥è‡ªåŠ¨æ˜¾ç¤ºå½“å‰å‰ä¸‰åä¿®å£«

## æŠ€æœ¯å®ç°

### éšæœºåå­—ç”Ÿæˆ
```javascript
const SURNAMES = ['èµµ', 'é’±', 'å­™', 'æ', ...]; // 70ä¸ªå§“æ°
const MALE_NAME_CHARS = ['è½©', 'å®‡', 'è¾°', ...]; // 50+ä¸ªç”·æ€§åå­—ç”¨å­—
const FEMALE_NAME_CHARS = ['å©·', 'é›ª', 'æœˆ', ...]; // 50+ä¸ªå¥³æ€§åå­—ç”¨å­—

function generateRandomName(gender) {
  const surname = SURNAMES[Math.floor(Math.random() * SURNAMES.length)];
  const nameChars = gender === 'male' ? MALE_NAME_CHARS : FEMALE_NAME_CHARS;
  const firstName = // 1-2ä¸ªå­—çš„åå­—...
  return surname + firstName;
}
```

### ç§°å·ç”Ÿæˆ
```javascript
const TITLE_PREFIXES = ['å‰‘', 'åˆ€', 'æ‹³', 'æŒ', ...]; // 20+ä¸ªå‰ç¼€
const TITLE_SUFFIXES = ['å°Š', 'åœ£', 'ç‹', 'å›', ...]; // 20+ä¸ªåç¼€

function generateRandomTitle() {
  const prefix = TITLE_PREFIXES[Math.floor(Math.random() * TITLE_PREFIXES.length)];
  const suffix = TITLE_SUFFIXES[Math.floor(Math.random() * TITLE_SUFFIXES.length)];
  return prefix + suffix;
}
```

### æ¼”åŒ–ç³»ç»Ÿ
```javascript
function evolveWorldNpcs(worldNpcs, currentYear) {
  return worldNpcs.map(npc => {
    if (npc.status === 'DEAD') return npc;
    
    // å¹´é¾„å¢é•¿
    npc.age++;
    
    // çªç ´æ£€æŸ¥
    if (shouldAttemptBreakthrough(npc)) {
      const success = Math.random() < getBreakthroughChance(npc);
      if (success) {
        npc.tier = nextTier;
        npc.majorEvents.push({
          year: currentYear,
          event: `çªç ´è‡³${npc.tier}`
        });
      }
    }
    
    // æ­»äº¡æ£€æŸ¥
    const deathChance = calculateDeathChance(npc);
    if (Math.random() < deathChance) {
      npc.status = 'DEAD';
      npc.deathYear = currentYear;
    }
    
    return npc;
  });
}
```

## æ•°æ®ç»“æ„

### ä¸–ç•ŒNPCå¯¹è±¡
```javascript
{
  id: 'world_npc_1',
  name: 'æè½©å®‡',
  title: 'å‰‘å°Š',
  gender: 'male',
  age: 156,
  tier: 'å…ƒå©´æœŸ',
  currentExp: 1000000,
  sect: 'å¤©å‰‘å®—',
  personality: 'righteous',
  relationships: {},
  majorEvents: [
    { year: 50, event: 'æ‹œå…¥å¤©å‰‘å®—' },
    { year: 100, event: 'çªç ´è‡³é‡‘ä¸¹æœŸ' },
    { year: 150, event: 'çªç ´è‡³å…ƒå©´æœŸ' }
  ],
  status: 'ALIVE' // or 'DEAD'
}
```

## ç©å®¶æ•°æ®é›†æˆ
```javascript
// src/data/initialPlayer.js
export const initialPlayer = {
  // ...å…¶ä»–å±æ€§
  worldNpcs: [],  // ä¸–ç•Œåäººæ± 
  newsBuffer: []  // æ–°é—»ç¼“å†²åŒº
};
```

## æ–‡ä»¶ä¿®æ”¹æ¸…å•

### æ–°å¢æ–‡ä»¶
- `src/game/worldNpcGenerator.js` - ä¸–ç•ŒNPCç”Ÿæˆå™¨å’Œæ¼”åŒ–ç³»ç»Ÿ

### ä¿®æ”¹æ–‡ä»¶
- `src/App.jsx`:
  - å¯¼å…¥ä¸–ç•ŒNPCç”Ÿæˆå™¨
  - æ·»åŠ ä¸–ç•ŒNPCæ± åˆå§‹åŒ–é€»è¾‘ï¼ˆuseEffectï¼‰
  - æ·»åŠ å¹´åº¦æ¼”åŒ–é€»è¾‘ï¼ˆåœ¨å¹´é¾„å¢é•¿æ—¶ï¼‰
  - ç§»é™¤ç‹¬ç«‹å¤©æœºæ¦œæŒ‰é’®å’ŒçŠ¶æ€

- `src/data/initialPlayer.js`:
  - æ·»åŠ  `worldNpcs: []` å­—æ®µ

- `src/data/newsTemplates.js`:
  - ä¿®æ”¹ `generatePowerRanking()` å‡½æ•°
  - åˆå¹¶ä¸–ç•ŒNPCã€ç©å®¶ã€æ´»è·ƒNPCæ•°æ®
  - ç”Ÿæˆå‰ä¸‰åæ’è¡Œæ¦œ

### åˆ é™¤æ–‡ä»¶
- `src/components/EliteRankingModal/` - ç‹¬ç«‹å¤©æœºæ¦œå¼¹çª—ï¼ˆå·²åˆ é™¤ï¼‰
- `src/components/EliteDetailModal/` - åäººè¯¦æƒ…å¼¹çª—ï¼ˆå·²åˆ é™¤ï¼‰

## æµ‹è¯•è¦ç‚¹

1. **åˆå§‹åŒ–æµ‹è¯•**:
   - æ–°æ¸¸æˆå¼€å§‹æ—¶è‡ªåŠ¨ç”Ÿæˆ30ä½ä¸–ç•Œåäºº
   - åå­—å’Œç§°å·éƒ½æ˜¯éšæœºç”Ÿæˆçš„ä¸­å¼åç§°

2. **æ¦œå•æ˜¾ç¤ºæµ‹è¯•**:
   - æ‰“å¼€é‚¸æŠ¥æŸ¥çœ‹å¤©æœºæ¦œ
   - åº”æ˜¾ç¤ºå‰ä¸‰åä¿®å£«ï¼ˆå¯èƒ½åŒ…æ‹¬ç©å®¶ã€ä¸–ç•Œåäººã€é…å¶/å­å—£ï¼‰
   - æ’åæ­£ç¡®ï¼ˆæŒ‰ä¿®ä¸ºå€¼æ’åºï¼‰

3. **æ¼”åŒ–æµ‹è¯•**:
   - å¿«è¿›å‡ å¹´ï¼Œè§‚å¯Ÿä¸–ç•Œåäººæ˜¯å¦æœ‰çªç ´
   - æŸ¥çœ‹æ˜¯å¦æœ‰åäººé™¨è½çš„æ–°é—»
   - æ¦œå•æ’ååº”è¯¥åŠ¨æ€å˜åŒ–

4. **å­˜æ¡£æµ‹è¯•**:
   - ä¿å­˜æ¸¸æˆåé‡æ–°åŠ è½½
   - ä¸–ç•Œåäººæ± æ•°æ®åº”è¯¥æ­£ç¡®æ¢å¤

## ä½¿ç”¨è¯´æ˜

### æŸ¥çœ‹å¤©æœºæ¦œ
1. ç­‰å¾…æ¯å­£åº¦ï¼ˆ3ä¸ªæœˆï¼‰çš„é‚¸æŠ¥å‘å¸ƒ
2. ç‚¹å‡»"æŸ¥çœ‹é‚¸æŠ¥"æŒ‰é’®
3. åœ¨é‚¸æŠ¥ä¸­æŸ¥çœ‹å¤©æœºæ¦œå‰ä¸‰å

### ä¸–ç•Œåäººæ¼”åŒ–
- è‡ªåŠ¨è¿›è¡Œï¼Œæ— éœ€æ‰‹åŠ¨æ“ä½œ
- æ¯å¹´1æœˆè‡ªåŠ¨æ‰§è¡Œ
- åäººçªç ´æˆ–é™¨è½ä¼šæœ‰æ–°é—»é€šçŸ¥

## æœªæ¥å¯æ‰©å±•åŠŸèƒ½

1. **é­é‡ä¸–ç•Œåäºº**:
   - å¤–å‡ºæ¸¸å†æ—¶æœ‰æ¦‚ç‡é­é‡æ¦œå•äººç‰©
   - å¯ä»¥æŒ‘æˆ˜ã€ç»“äº¤æˆ–æ‹œå¸ˆ

2. **åäººè¯¦æƒ…**:
   - ç‚¹å‡»æ¦œå•ä¸­çš„åäººæŸ¥çœ‹è¯¦ç»†ä¿¡æ¯
   - æ˜¾ç¤ºå†å²äº‹ä»¶ã€å®—é—¨å½’å±ã€æ€§æ ¼ç‰¹ç‚¹

3. **ä¸–ç•Œäº‹ä»¶**:
   - åäººä¹‹é—´çš„å¯¹å†³
   - å®—é—¨é—´çš„æˆ˜äº‰
   - é­”é“å…¥ä¾µç­‰å¤§äº‹ä»¶

4. **åŠ¨æ€ç§°å·**:
   - æ ¹æ®æˆå°±åŠ¨æ€æ›´æ–°ç§°å·
   - å¦‚"å± é­”è€…"ã€"å‰‘é“ç¬¬ä¸€"ç­‰

## æ³¨æ„äº‹é¡¹

- ä¸–ç•Œåäººä¸ä¼šä¸»åŠ¨ä¸ç©å®¶äº’åŠ¨ï¼ˆæš‚æ—¶ï¼‰
- æ­»äº¡çš„åäººä¸ä¼šä»æ± ä¸­ç§»é™¤ï¼Œåªæ˜¯æ ‡è®°ä¸ºDEADçŠ¶æ€
- æ¦œå•æ’ååªæ˜¾ç¤ºå­˜æ´»çš„è§’è‰²
- æ¼”åŒ–ç³»ç»Ÿæ€§èƒ½å‹å¥½ï¼Œæ¯å¹´åªè®¡ç®—ä¸€æ¬¡

## ç‰ˆæœ¬ä¿¡æ¯
- **åˆ›å»ºæ—¥æœŸ**: 2024å¹´
- **ç‰ˆæœ¬**: v1.0
- **ä½œè€…**: GitHub Copilot
